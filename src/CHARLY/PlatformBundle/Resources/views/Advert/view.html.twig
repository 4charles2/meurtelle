{# src/CHARLY/PlatformBundle/ressource/views/advert/view.html.twig #}

{% extends "CHARLYPlatformBundle::layout.html.twig" %}

{% block title %} Vue de l'annonce - {{ parent() }} {% endblock %}

{% block charlyPlatform_body %}

    <div>
        <div style="display: flex; background-color: #cccccc">
            {% if advert.image is not null %}
                <img src="{{ advert.image.url }}" alt="{{ advert.image.alt }}" width="10%">
            {% endif %}
            <div style="padding-left: 13px; padding-bottom: 13px;">
                <h2>{{ advert.title }}</h2>
                <cite>Par {{ advert.author }}, Le {{ advert.date|date('d/m/Y') }}</cite>
            </div>
        </div>
    </div>
    <div class="well">

        {{ advert.content }}
    </div>
    <p>
        <a href="{{ path('charly_platform_homepage') }} " class="btn btn-default">
            <i class="glyphicon glyphicon-chevron-left"></i>
            Retour à la liste des annonces
        </a>
        <a href="{{ path('charly_platform_edit', {'id': advert.id})  }} " class="btn btn-danger">
            <i class="glyphicon glyphicon-edit"></i>
            Modifier l'annonce
        </a>
        <a href="{{ path('charly_platform_delete', {'id': advert.id})  }} " class="btn btn-danger">
            <i class="glyphicon glyphicon-trash"></i>
            Suprimer l'annonce
        </a>
    </p>
    <div class="text-info">
        {% if not advert.getCategories.empty %}
            <p>Cette annonce est parue dans les  categories suivantes :
            {% for categorie in advert.getCategories %}
                <span style="color: white">{{ categorie.name }}</span> {% if not loop.last %}, {% endif %}
                {% endfor %}
            </p>
        {% endif %}

    </div>

    {% if advert.getSkills|length > 0 %}
        <div >
            <p style="color: white">Cette annonce requiert les compétences suivantes : </p>
            <ul class="list-inline" style="background-color: #d9d9d9; padding: 10px">
                {% for  advertSkill in advert.getSkills %}
                    <li style="margin-left: 12px"><strong>{{ advertSkill.skill.name }}</strong> : niveau <span style="color: #a4403b"> {{ advertSkill.level }}</span></li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}
        <div id="containAppli">
            <h3>
    {% if not advert.getApplications.empty %}
        Candidatures à l'offre d'emplois
    {% else %}
        Pas encore de candidature
    {% endif %}
            </h3>
            {% for application in advert.getApplications %}
                <div class="application" style="border-radius: 10px 0px">
                    <p>{{ application.getContent }}</p>
                    <p>
                        {{ application.getAuthor }} Le :
                        {{ application.getDate|date('d/m/Y') }}
                    </p>
                </div>
            {% endfor %}
    </div>


    <div>

    </div>

{% endblock %}